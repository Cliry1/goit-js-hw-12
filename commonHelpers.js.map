{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst ul = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnMore = document.querySelector(\".button-load-more\");\n\nlet searchInfo;\nlet pageCount;\nconst limit = 40;\nlet totalItems;\n\nvar lightbox = new SimpleLightbox('.gallery a', {   \n  captionsData: 'alt',\n  captionDelay: 250, }); \n\n\nform.addEventListener(\"submit\", createListItem);\n\nasync function createListItem(event){\n  btnMore.classList.add('search');\n  event.preventDefault();\n  searchInfo= form.item.value.trim();\n  ul.innerHTML = \"\"\n  pageCount=1;\n  loader.classList.remove(\"search\");\n  const posts = await paramList(pageCount, searchInfo);\n  createImg(posts);\n  form.reset();\n  if(totalItems>40){\n    btnMore.classList.remove('search');\n  }\n  else{\n    btnMore.classList.add('search');\n  }\n}\n\n\nbtnMore.addEventListener(\"click\", async ()=>{\n  try {\n    btnMore.classList.add('search');\n    pageCount++;\n    const posts = await paramList(pageCount,searchInfo);\n    createImg(posts);\n    if(pageCount>=Math.ceil(totalItems/limit)){\n      btnMore.classList.add(\"search\");\n      return iziToast.error({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results.\"\n      });\n    }\n    else{\n      btnMore.classList.remove('search');\n    }\n\n\n  } catch (error) {\n    console.log(error)\n  }\n})\n\n\n\nasync function paramList(pageCount, searchInfo){\n  const itemParam = new URLSearchParams({\n    key:\"41728524-9ad3c3555a09648a5caa6ae20\",\n    q:searchInfo,\n    image_type : \"photo\",\n    orientation :\"horizontal\",\n    safesearch : true,\n    page : pageCount,\n    per_page: limit\n  });\n  const collection = await axios.get(`https://pixabay.com/api/?${itemParam}`)\n  return collection.data;\n}\n\n\nfunction createImg(posts){\n  if(posts.total === 0){\n    iziToast.error({\n      title: 'No result',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position:\"topRight\"\n    });\n    loader.classList.add('search');\n    return;\n  }\n  const markup = posts.hits.reduce((acc, elem)=>\n  acc + `<li class=\"element\"><a href=\"${elem.largeImageURL}\"><img class=\"image\" src=\"${elem.webformatURL}\"  alt=\"${elem.tags}\"></a>\n  <div class=\"container-stat\">\n  <p class=\"stat\">Likes <span class=\"stat-value\">${elem.likes}</span></p>\n  <p class=\"stat\">Views <span class=\"stat-value\">${elem.views}</span></p>\n  <p class=\"stat\">Comments <span class=\"stat-value\">${elem.comments}</span></p>\n  <p class=\"stat\">Downloads <span class=\"stat-value\">${elem.downloads}</span></p>\n  </div></li>`, \"\")\n \n  ul.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n  loader.classList.add('search');\n  totalItems = posts.totalHits;\n\n}\n"],"names":["form","ul","loader","btnMore","searchInfo","pageCount","limit","totalItems","lightbox","SimpleLightbox","createListItem","event","posts","paramList","createImg","iziToast","error","itemParam","axios","markup","acc","elem"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAK,SAAS,cAAc,UAAU,EACtCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,mBAAmB,EAE1D,IAAIC,EACAC,EACJ,MAAMC,EAAQ,GACd,IAAIC,EAEJ,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAAG,CAAG,EAGtBT,EAAK,iBAAiB,SAAUU,CAAc,EAE9C,eAAeA,EAAeC,EAAM,CAClCR,EAAQ,UAAU,IAAI,QAAQ,EAC9BQ,EAAM,eAAc,EACpBP,EAAYJ,EAAK,KAAK,MAAM,KAAI,EAChCC,EAAG,UAAY,GACfI,EAAU,EACVH,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMU,EAAQ,MAAMC,EAAUR,EAAWD,CAAU,EACnDU,EAAUF,CAAK,EACfZ,EAAK,MAAK,EACPO,EAAW,GACZJ,EAAQ,UAAU,OAAO,QAAQ,EAGjCA,EAAQ,UAAU,IAAI,QAAQ,CAElC,CAGAA,EAAQ,iBAAiB,QAAS,SAAU,CAC1C,GAAI,CACFA,EAAQ,UAAU,IAAI,QAAQ,EAC9BE,IACA,MAAMO,EAAQ,MAAMC,EAAUR,EAAUD,CAAU,EAElD,GADAU,EAAUF,CAAK,EACZP,GAAW,KAAK,KAAKE,EAAWD,CAAK,EACtC,OAAAH,EAAQ,UAAU,IAAI,QAAQ,EACvBY,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACjB,CAAO,EAGDZ,EAAQ,UAAU,OAAO,QAAQ,CAIpC,OAAQa,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAID,eAAeH,EAAUR,EAAWD,EAAW,CAC7C,MAAMa,EAAY,IAAI,gBAAgB,CACpC,IAAI,qCACJ,EAAEb,EACF,WAAa,QACb,YAAa,aACb,WAAa,GACb,KAAOC,EACP,SAAUC,CACd,CAAG,EAED,OADmB,MAAMY,EAAM,IAAI,4BAA4BD,GAAW,GACxD,IACpB,CAGA,SAASH,EAAUF,EAAM,CACvB,GAAGA,EAAM,QAAU,EAAE,CACnBG,EAAS,MAAM,CACb,MAAO,YACP,QACE,2EACF,SAAS,UACf,CAAK,EACDb,EAAO,UAAU,IAAI,QAAQ,EAC7B,MACD,CACD,MAAMiB,EAASP,EAAM,KAAK,OAAO,CAACQ,EAAKC,IACvCD,EAAM,gCAAgCC,EAAK,0CAA0CA,EAAK,uBAAuBA,EAAK;AAAA;AAAA,mDAErEA,EAAK;AAAA,mDACLA,EAAK;AAAA,sDACFA,EAAK;AAAA,uDACJA,EAAK;AAAA,eAC5C,EAAE,EAEhBpB,EAAG,mBAAmB,YAAakB,CAAM,EACzCX,EAAS,QAAO,EAChBN,EAAO,UAAU,IAAI,QAAQ,EAC7BK,EAAaK,EAAM,SAErB"}